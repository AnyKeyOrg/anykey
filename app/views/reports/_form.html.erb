<form action="<%= reports_path %>" id="new_report" method="POST" enctype="multipart/form-data" class="flexbox vertical">
  <div style="hidden">
    <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
    <input type="hidden" id="report_reported_twitch_id" name="report[reported_twitch_id]" value="<%= @report.reported_twitch_id %>">
    <input type="hidden" id="report_reporter_twitch_id" name="report[reporter_twitch_id]" value="<%= @report.reporter_twitch_id %>">
    <input type="hidden" id="report_incident_stream_twitch_id" name="report[incident_stream_twitch_id]" value="<%= @report.incident_stream_twitch_id %>">
  </div>
  <div class="title flexbox vertical center">
    Badge Abuse Report
  </div>  
  <%= display_alerts %>
  <div class="intro">
    If you have seen someone with the AnyKey badge causing trouble in a stream, you can use this form to file a report and our ComfyCrew will review the situation.<br><br>
    Fields marked with an (°) are optional, but the more information you provide the more likely our moderators will be able to take action.
  </div>
  <div class="flexbox horizontal wrap justify-space-between">
    <div class="item half-width flexbox vertical stretch">
      <label for="reported_twitch_name" class="text-field">Twitch User You're Reporting</label>
      <input id="report_reported_twitch_name" name="report[reported_twitch_name]" class="text-field" type="text" value="<%= @report.reported_twitch_name %>" autocomplete="off" data-url="<%= twitch_lookup_path %>" required tabindex="1">
      <div id="reported_twitch_name_status" class="status-response flexbox vertical end"></div>
    </div>
    <div class="item half-width flexbox vertical stretch">
      <label for="incident_stream" class="text-field">Stream Where Incident Happened</label>
      <input id="report_incident_stream" name="report[incident_stream]" class="text-field" type="text" value="<%= @report.incident_stream %>" autocomplete="off" data-url="<%= twitch_lookup_path %>" required tabindex="2">
      <div id="incident_stream_status" class="status-response flexbox vertical end"></div>
    </div>
  </div>
  <div class="flexbox horizontal wrap justify-space-between">
    <div class="item half-width flexbox vertical stretch">
      <label for="image" class="text-field">Screenshot of incident°</label>
      <div class="description">Include as much chat context as possible</div>
      <input id="report_image" name="report[image]" type="file" tabindex="3">
    </div>
    <div class="item half-width flexbox vertical stretch">
      <label for="incident_occurred" class="text-field">Date of Incident°</label>
      <input id="report_incident_occurred" name="report[incident_occurred]" class="text-field small-font" type="date" value="<%= @report.incident_occurred %>" autocomplete="off" tabindex="4">
    </div>
  </div>
  <div class="item flexbox vertical stretch">
    <div class="flexbox horizontal wrap justify-space-between">
      <label for="incident_description" class="text-field">Description of the Incident</label>
      <div id="incident-descripton-counter" data-max-length="1000">1000</div>
    </div>  
    <textarea id="report_incident_description" name="report[incident_description]" class="text-field" type="text" autocomplete="off" required tabindex="5"><%= @report.incident_description %></textarea>
  </div>
  <div class="item flexbox vertical stretch">
    <label for="recommended_response" class="text-field">What Do You Think We Should Do?°</label>
    <div class="flexbox horizontal wrap justify-space-between">
      <div class="description">Our mods will consider your opinion about handling the situation</div>
      <div class="flexbox vertical end flex-1">
        <div id="recommended-response-counter" data-max-length="500">500</div>
      </div>
    </div>
    <textarea id="report_recommended_response" name="report[recommended_response]" class="text-field" type="text" autocomplete="off" tabindex="6"><%= @report.recommended_response %></textarea>
  </div>
  <div class="flexbox horizontal wrap justify-space-between">
    <div class="item half-width flexbox vertical stretch">
      <label for="reporter_email" class="text-field">Your Email Address</label>
      <input id="report_reporter_email" name="report[reporter_email]" class="text-field" type="email" value="<%= @report.reporter_email %>" required pattern="[A-Za-z0-9._%+\-]+@[A-Za-z0-9.\-]+.[A-Za-z]" tabindex="7">
    </div>
    <div class="item half-width flexbox vertical stretch">
      <label for="reporter_twitch_name" class="text-field">Your Twitch Name°</label>
      <input id="report_reporter_twitch_name" name="report[reporter_twitch_name]" class="text-field" type="text" value="<%= @report.reporter_twitch_name %>" autocomplete="off" data-url="<%= twitch_lookup_path %>" tabindex="8">
      <div id="reporter_twitch_name_status" class="status-response flexbox vertical end"></div>
    </div>
  </div>
  <input id="report_submit" name="commit" type="submit" class="button" value="Send Report" tabindex="9" onClick="gtag('event', 'ButtonClick', {'event_category': 'Report', 'event_label': 'FormSubmit'});" data-disable-with="Sending">
</form>